
<!doctype html>
<html lang="ar" dir="rtl">
<head>
    <style>
  .lesson-link { text-decoration: none; }
  .lesson-link:hover { text-decoration: underline; }

  .edit-pencil {
    margin-inline-start: .4rem;
    font-size: .95rem;
    text-decoration: none;
    color: #666;
  }
  .edit-pencil:hover { color: #000; }
</style>

  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Ø¯Ø±ÙˆØ³ {{ subject.name }} â€” {{ term }}</title>
  <style>
    body{font-family:system-ui,Tahoma; margin:2rem;}
    .header{display:flex; justify-content:space-between; align-items:center; gap:1rem; flex-wrap:wrap}
    .badge{display:inline-block; background:#eef; border:1px solid #dde; padding:.25rem .6rem; border-radius:8px; font-size:.9rem}
    .btn{padding:.5rem .8rem; border-radius:10px; border:1px solid #ccc; text-decoration:none; display:inline-block}
    .btn:hover{background:#f7f7f7}
    table{width:100%; border-collapse:collapse; margin-top:1rem}
    th,td{border-bottom:1px solid #eee; padding:.6rem; text-align:right}
    .actions a{margin-inline-start:.4rem}
  </style>
  <style>
  .q-badge{
    display:inline-block; min-width:2.2rem; text-align:center;
    padding:.15rem .45rem; border-radius:999px; font-size:.9rem;
    border:1px solid #ddd; color:#555; text-decoration:none;
  }
  .q-badge.has{ background:#e9f9ee; border-color:#bfe8c8; color:#176c3a; }
  .q-badge.empty{ background:#fafafa; color:#999; }
</style>
</head>
<body>
  <div class="header">
    <div>
      <span class="badge">Ø§Ù„Ø³Ù†Ø©: {{ term.year }}</span>
      <span class="badge">Ø§Ù„ÙØµÙ„: {{ term.get_number_display }}</span>
      <span class="badge">Ø§Ù„Ù…Ø§Ø¯Ø©: {{ subject.name }}</span>
    </div>
    <div>
      <a class="btn" href="{% url 'term_subjects' term.id %}">â¬… Ø±Ø¬ÙˆØ¹ Ù„Ù„Ù…ÙˆØ§Ø¯</a>
      <a class="btn" href="{% url 'lesson_create' term.id subject.id %}">â• Ø¥Ø¶Ø§ÙØ© Ø¯Ø±Ø³</a>
    </div>
  </div>

  <table>
    <thead>
      <tr>
        <th>#</th>
        <th>Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø¯Ø±Ø³</th>
        <th>ØªØ±ØªÙŠØ¨</th>
        <th>Ø£Ø³Ø¦Ù„Ø©</th>
        <th>Ø¥Ø¯Ø§Ø±Ø©</th>
      </tr>
    </thead>
<tbody>
  {% for lesson in lessons %}
    <tr>
      <td>{{ forloop.counter }}</td>
      <td>
        <a class="lesson-link" href="{% url 'lesson_detail' term.id subject.id lesson.id %}">
          {{ lesson.title }}
        </a>
        <a class="edit-pencil" href="{% url 'lesson_update' term.id subject.id lesson.id %}" title="ØªØ¹Ø¯ÙŠÙ„ Ø§Ø³Ù… Ø§Ù„Ø¯Ø±Ø³">âœï¸</a>
      </td>
      <td>{{ lesson.order }}</td>

      <!-- Ø¹Ù…ÙˆØ¯ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© -->
      <td>
        {% if lesson.question_count and lesson.question_count > 0 %}
          <a class="q-badge has" href="{% url 'lesson_questions' term.id subject.id lesson.id %}" title="Ø¹Ø±Ø¶ Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ø¯Ø±Ø³">
            â“ {{ lesson.question_count }}
          </a>
        {% else %}
          <span class="q-badge empty" title="Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£Ø³Ø¦Ù„Ø©">â€”</span>
        {% endif %}
      </td>

      <td class="actions">
        <a class="btn" href="{% url 'lesson_manage' term.id subject.id lesson.id %}">ğŸ§° Ø¥Ø¯Ø§Ø±Ø© (Ù…Ø­ØªÙˆÙ‰/Ø£Ø³Ø¦Ù„Ø©)</a>
        <a class="btn" href="{% url 'lesson_delete' term.id subject.id lesson.id %}">ğŸ—‘ï¸ Ø­Ø°Ù</a>
      </td>
    </tr>
  {% empty %}
    <tr><td colspan="5">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¯Ø±ÙˆØ³ Ø¨Ø¹Ø¯.</td></tr>
  {% endfor %}
</tbody>


  </table>
</body>
</html>
